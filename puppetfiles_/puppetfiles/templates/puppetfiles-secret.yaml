## SECRET ##
{{- include "secret.version" . }}
kind: "Secret"
metadata:
  name: "{{ .Release.Name }}-{{ .Values.puppetfiles.component }}-secret"
  namespace: {{ .Release.Namespace | quote }}
  labels:
    {{- include "puppetfiles.labels.puppetfiles" . | indent 4 }}
  annotations:
    {{- include "puppetfiles.tracking.annotation" . | indent 4 }}
type: "Opaque"
stringData:
  puppetfiles.properties: |
    com.ercot.puppetfiles.repoUrl: {{ required "A puppetfiles url is required." .Values.puppetfiles.config.repoUrl }}
    com.ercot.puppetfiles.username: {{ required "A puppetfiles username is required." .Values.puppetfiles.config.username }}
    com.ercot.puppetfiles.password: {{ required "A puppetfiles password is required." .Values.puppetfiles.config.password }}
    com.ercot.puppetfiles.secure.endpoints: {{ .Values.puppetfiles.secure.endpoints }}
    com.ercot.puppetfiles.ldap.userBase: {{ .Values.puppetfiles.ldap.userBase }}
    com.ercot.puppetfiles.ldap.filter: {{ .Values.puppetfiles.ldap.filter }}
    com.ercot.puppetfiles.ldap.url: {{ required "An LDAP url is required." .Values.puppetfiles.ldap.url }}
    com.ercot.puppetfiles.ldap.rootDn: {{ .Values.puppetfiles.ldap.rootDn }}
    com.ercot.puppetfiles.ldap.managerDn: {{ required "An LDAP managerDN is required." .Values.puppetfiles.ldap.managerDn }}
    com.ercot.puppetfiles.ldap.managerPw: {{ required "An LDAP managerPw is required." .Values.puppetfiles.ldap.managerPw }}